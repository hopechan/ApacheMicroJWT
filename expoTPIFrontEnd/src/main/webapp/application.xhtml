<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
  xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
  xmlns:jsf="http://xmlns.jcp.org/jsf"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<head>
    <title> Aplicacion </title>
    <style>
      #logoutButton {
          width: 100%;
          border-bottom: 1px solid black;
          padding-bottom: 2em;
          margin-bottom: 1em;
      }
      #logoutButton input {
          position: absolute;
          top: 1em;
          right: 1em;
      }
      #flexContainer {
        display: flex;
        flex-direction: row;
      }
      #systemTable {
        min-width: 30em;
        padding: 2em;
      }
      #addSystemForm {
        min-width: 30em;
        padding: 2em;
      }
    </style>
</head>
<body>
    <h:panelGroup id="logoutButton" layout="block">
        <FORM METHOD="POST" ACTION="ibm_security_logout" NAME="logout">
          <input type="submit" name="logout" value="Log Out" />
          <input type="HIDDEN" name="logoutExitPage" value="/login.jsf" />
        </FORM>
    </h:panelGroup>

    <h:panelGrid class="table" columns="2" border="3">
           <h:panelGroup>Nombre:</h:panelGroup>
           <h:panelGroup>#{applicationBean.username}</h:panelGroup>
           <h:panelGroup>Roles:</h:panelGroup>
           <h:panelGroup>#{applicationBean.userRole}</h:panelGroup>
           <h:panelGroup>Sistema Operativo:</h:panelGroup>
           <h:panelGroup>#{applicationBean.os}</h:panelGroup>
           <h:panelGroup>Total marcas:</h:panelGroup>
           <h:panelGroup id="invSize">#{applicationBean.inventorySize}</h:panelGroup>
           <h:panelGroup>JSON Web Token:</h:panelGroup>
           <h:panelGroup>#{applicationBean.jwt}</h:panelGroup>
    </h:panelGrid>

    <div id="flexContainer">
      <h:panelGroup id="systemTable">
        <h2>Sistemas</h2>
        <table>
          <tr>
            <th>Hostname</th>
            <th>Username</th>
            <th>OS Name</th>
          </tr>
          <ui:repeat var="sys" value="#{applicationBean.inventoryList}">
            <tr>
              <td>
                <h:outputText value="#{sys.hostname}" />
              </td>
              <td>
                <h:outputText value="#{sys.username}" />
              </td>
              <td>
                  <h:outputText value="#{sys.osName}" />
              </td>
            </tr>
          </ui:repeat>
        </table>
      </h:panelGroup>

      <h:form id="addSystemForm">
        <h2>Agregar sistema</h2>
        <h:inputText pt:placeholder="hostname" id="hostname" value="#{applicationBean.hostname}"></h:inputText>
        <h:commandButton value="Add System">
          <f:ajax execute="hostname" render="invSize systemTable" />
        </h:commandButton>
      </h:form>
    </div>
</body>
</html>